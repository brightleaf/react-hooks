<!DOCTYPE html>
<html lang="en">

<head>
  <title>@brightleaf/react-hooks - Useful react hooks - Brightleaf JS</title>
  <link rel="stylesheet" type="text/css" href="styles.css" />
  <link rel="stylesheet" type="text/css" href="extend.css" />
  <meta name="description" content="Useful react hooks" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.14.2/styles/github.min.css" />

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="@brightleaf/react-hooks - Useful react hooks - Brightleaf JS" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="@brightleaf/react-hooks - Useful react hooks - Brightleaf JS" />
  <meta property="og:url" content="https://brightleaf.github.io/react-hooks" />
  <meta property="og:image" content="https://brightleaf.github.io/react-hooks/brightleaf-react-hooks.png" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@brightleaf_js" />
  <meta name="twitter:title" content="@brightleaf/react-hooks - Useful react hooks - Brightleaf JS" />
  <meta name="twitter:description" content="@brightleaf/react-hooks - Useful react hooks - Brightleaf JS" />
  <meta name="twitter:image" content="https://brightleaf.github.io/react-hooks/brightleaf-react-hooks.png" />

</head>

<body>
  <div class="container">
  <h1 id="brightleaf-react-hooks">Brightleaf React Hooks</h1>
<p>Useful React Hooks</p>
<ul>
<li><code>useFetch</code> - Hook to use Fetch</li>
<li><code>useGet</code> - Hook to make a get request</li>
<li><code>usePost</code> - Hook to make an HTTP Post</li>
<li><code>useClickOutside</code> - Hook to handle a click outside an element</li>
<li><code>useGraphQL</code> - Hook to make a GraphQL request</li>
<li><code>useNes</code> - Hook to connect to Hapijs NES</li>
<li><code>useWebSockets</code> - Hook to interact with WebSockets</li>
<li><code>useLocalStorage</code> - Hook to local storage</li>
<li><code>useHover</code> - Hook for binding to hover of an element</li>
</ul>
<h2 id="graphql-hook">GraphQL Hook</h2>
<pre><code class="hljs javascript language-javascript"><span class="hljs-keyword">import</span> React, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { useGraphQL } <span class="hljs-keyword">from</span> <span class="hljs-string">'@brightleaf/react-hooks'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> [id, setId] = useState(<span class="hljs-number">1</span>)
  <span class="hljs-keyword">const</span> { data, loading, error } = useGraphQL(
    <span class="hljs-string">'https://swapiql.herokuapp.com/graphql'</span>,
    <span class="hljs-string">`query Person($id: ID) {
      person(id: $id) {
        id,
        name
      }
    }`</span>,
    { id }
  )
  <span class="hljs-keyword">if</span> (loading) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading Data<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  }
  <span class="hljs-keyword">if</span> (error) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error getting graphql data<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  }
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data.person[0].name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}</code></pre>
<h2 id="post-hook">Post Hook</h2>
<pre><code class="hljs javascript language-javascript"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { Button, Form, TextBox } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-form-elements'</span>
<span class="hljs-keyword">import</span> { usePost } <span class="hljs-keyword">from</span> <span class="hljs-string">'@brightleaf/react-hooks'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> { data, error, loading, postData } = usePost(
    <span class="hljs-string">`https://kev-pi.herokuapp.com/api/echo`</span>
  )

  <span class="hljs-keyword">if</span> (loading) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading Data<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  }
  <span class="hljs-keyword">if</span> (error) {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error getting graphql data<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  }
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Form</span>
      <span class="hljs-attr">name</span>=<span class="hljs-string">"testForm"</span>
      <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{data</span> =&gt;</span> {
        postData(data)
      }}
    &gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">TextBox</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"My Label"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"myTextBox"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>Send<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span>
  )
}</span></code></pre>
<h2 id="get-hook">Get Hook</h2>
<pre><code class="hljs javascript language-javascript"><span class="hljs-keyword">import</span> React, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { useGet } <span class="hljs-keyword">from</span> <span class="hljs-string">'@brightleaf/react-hooks'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> [id, setId] = useState(<span class="hljs-number">1</span>)

  <span class="hljs-keyword">const</span> { data, error, loading, getUrl } = useGet(
    <span class="hljs-string">`https://swapiql.herokuapp.com/api/characters/<span class="hljs-subst">${id}</span>`</span>
  )
  <span class="hljs-keyword">if</span> (error) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Error Getting Data<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
  }
  <span class="hljs-keyword">if</span> (loading) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Loading Data<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
  }
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{data[0].name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>Pick a number<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"select"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{e</span> =&gt;</span> {
            getUrl('https://swapiql.herokuapp.com/api/characters/2')
          }}
        &gt;
          2
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}</code></pre>
<h2 id="click-outside-hook">Click Outside Hook</h2>
<pre><code class="hljs javascript language-javascript"><span class="hljs-keyword">import</span> React, { useState, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { useClickOutside } <span class="hljs-keyword">from</span> <span class="hljs-string">'@brightleaf/react-hooks'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> [menu, setMenu] = useState(<span class="hljs-literal">false</span>)
  <span class="hljs-keyword">const</span> navMenu= useRef()
  <span class="hljs-keyword">const</span> hideDropDown = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    setMenu(<span class="hljs-literal">false</span>)
  }
  useClickOutside(navMenu, hideDropDowns, menu)

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"App"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{navMenu}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">dropdown</span> ${<span class="hljs-attr">menu</span> ? '<span class="hljs-attr">active</span>' <span class="hljs-attr">:</span> ' '}`}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>
            <span class="hljs-attr">className</span>=<span class="hljs-string">"dropdown-trigger"</span>
            <span class="hljs-attr">onClick</span>=<span class="hljs-string">{e</span> =&gt;</span> {
              setMenu(!menu)
            }}
          &gt;
            Menu
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            ...// items
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      ... // rest of page
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}</code></pre>
<h1 id="nes-hook">NES Hook</h1>
<p>Client hook for connecting to an <a href="https://github.com/hapijs/nes">NES</a> instance</p>
<h3 id="messages">Messages</h3>
<pre><code class="hljs javascript language-javascript">import React from 'react'
import { useNes } from '@brightleaf/react-hooks'
export default () =&gt; {

  const { message, error, connecting, connected } = useNes(
    'wss://kev-pi.herokuapp.com'
  )

  if (error) {
    return &lt;div&gt;&lt;h1&gt;Error&lt;/h1&gt;&lt;/div&gt;
  }
  const connectMessage = connecting ? &lt;div&gt;Connecting&lt;/div&gt; : &lt;div&gt;Not Connecting&lt;/div&gt;
  const connectedMessage = connected ? &lt;div&gt;Connected&lt;/div&gt; : &lt;div&gt;Not Connected&lt;/div&gt;

  const messages = message.map((m, index) =&gt; &lt;div key={`key-${index}`}&gt;{m}&lt;/div&gt;)
  return (
    &lt;div className="App"&gt;
      &lt;h1&gt;Messages from Server&lt;/h1&gt;
      &lt;div&gt;{messages}&lt;/div&gt;
      &lt;div&gt;
        &lt;b&gt;Status Messages&lt;/b&gt;
        {connectMessage}
        {connectedMessage}
      &lt;/div&gt;
    &lt;/div&gt;
  )
}</code></pre>
<h3 id="subscriptions">Subscriptions</h3>
<p>Use the client from the hook to create a real time chat room</p>
<pre><code class="hljs javascript language-javascript"><span class="hljs-keyword">import</span> React, { useState}  <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { useNes } <span class="hljs-keyword">from</span> <span class="hljs-string">'@brightleaf/react-hooks'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> { client } = useNes(<span class="hljs-string">'wss://kev-pi.herokuapp.com'</span>)
  <span class="hljs-keyword">const</span> [messages, setMessages] = useState([{
    <span class="hljs-attr">body</span>: <span class="hljs-string">'welcome'</span>,
    <span class="hljs-attr">user</span>: <span class="hljs-string">'system'</span>
  }])
  <span class="hljs-keyword">const</span> addMessage = <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span>  {
    messages.push(msg)
    setMessages([...messages])
  }
  <span class="hljs-keyword">const</span> handler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">update, flags</span>) </span>{
    addMessage(update)
  }
  <span class="hljs-comment">// subscribe to a channel</span>
  client.subscribe(<span class="hljs-string">'/rooms/general'</span>, handler);

  <span class="hljs-keyword">const</span> messageList = messages.map(<span class="hljs-function">(<span class="hljs-params">{user, body}, index</span>) =&gt;</span> (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{</span>`<span class="hljs-attr">key-</span>${<span class="hljs-attr">index</span>}`}&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>{user}:<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>{body}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>))
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {messageList}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}</code></pre>
<h2 id="local-storage-hook">Local Storage Hook</h2>
<pre><code class="hljs javascript language-javascript"><span class="hljs-keyword">import</span> React, { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { useLocalStorage } <span class="hljs-keyword">from</span> <span class="hljs-string">'@brightleaf/react-hooks'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> [count, setCount] = useLocalStorage(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You clicked {count} times<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;
        Click me
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}</code></pre>
<h2 id="hover-hook">Hover Hook</h2>
<pre><code class="hljs javascript language-javascript"><span class="hljs-keyword">import</span> React, { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> { useHover } <span class="hljs-keyword">from</span> <span class="hljs-string">'@brightleaf/react-hooks'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> () =&gt; {
  <span class="hljs-keyword">const</span> elRef = useRef(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> hovered = useHover(elRef);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span> <span class="hljs-attr">hovered</span> ? '<span class="hljs-attr">animated</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">static</span>' }&gt;</span>
        Hover Over Me
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}</code></pre>
  </div>
<a href="https://www.github.com/brightleaf/react-hooks" class="github-corner" aria-label="Open GitHub project"><svg
    width="80" height="80" viewBox="0 0 250 250"
    style="position: absolute; top: 0px; fill: rgb(255, 255, 255); right: 0px;">
    <path class="octo-banner" d="M0 0l115 115h15l12 27 108 108V0z" fill="#151513"></path>
    <path class="octo-arm" d="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16"
      style="transform-origin: 130px 106px 0px;"></path>
    <path class="octo-body"
      d="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z">
    </path>
  </svg>
</a>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-64038939-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'UA-64038939-2');
</script>

</body>